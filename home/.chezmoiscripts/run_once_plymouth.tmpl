{{- if eq .chezmoi.os "linux" -}}
#! /usr/bin/env bash

echo
echo "--------------------------------------------------------------------------------"
echo "*** Plymouth"
echo "--------------------------------------------------------------------------------"

yay -S --needed --noconfirm plymouth plymouth-theme-arch-charge-big

# Add plymouth to mkinitcpio hooks after 'base udev'
# it will only add 'plymouth' if it is not already present
sudo sed -i '/^HOOKS=/!b; /plymouth/!s/\(base udev\)/\1 plymouth/' /etc/mkinitcpio.conf

# Change theme and regenerate initramfs
sudo plymouth-set-default-theme -R arch-charge-big

{{ end }}
