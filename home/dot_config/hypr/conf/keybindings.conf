# ░█░█░█▀▀░█░█░█▀▄░▀█▀░█▀█░█▀▄░▀█▀░█▀█░█▀▀░█▀▀
# ░█▀▄░█▀▀░░█░░█▀▄░░█░░█░█░█░█░░█░░█░█░█░█░▀▀█
# ░▀░▀░▀▀▀░░▀░░▀▀░░▀▀▀░▀░▀░▀▀░░▀▀▀░▀░▀░▀▀▀░▀▀▀

# See https://wiki.hyprland.org/Configuring/Keywords/
#  &  https://wiki.hyprland.org/Configuring/Binds/

binds {
  # workspace_back_and_forth = true
  # allow_workspace_cycles = true
  movefocus_cycles_fullscreen = false
  movefocus_cycles_groupfirst = true
}

# ================================================================================
# * Applications
# ================================================================================
bindd = SUPER      , Return, Terminal emulator          , exec, $mainTerminal
bindd = SUPER      , E     , Yazi File manager          , exec, uwsm-app -- $mainTerminal --class=$files -e $files
bindd = SUPER ALT  , E     , Thunar File manager        , exec, uwsm-app -- $altFiles
bindd = SUPER      , B     , Web browser                , exec, $hyprScripts/launch-browser
bindd = SUPER ALT  , V     , Open URL in mpv            , exec, mpv "$(wl-paste)"
bindd = SUPER CTRL , V     , Download video from URL    , exec, yt-dlp "$(wl-paste)"
# bindd = SUPER      , C     , Text editor                                  , exec, $editor
# bindd = Ctrl+Shift    , Escape, Launch system monitor (htop/btop or fallback to top), exec, $scrPath/sysmonlaunch.sh

# ================================================================================
# * Session
# ================================================================================
bindd  = CTRL ALT       , Backspace   , Kill hyprland session                         , exit
binddl = SUPER          , Escape      , Lock screen                                   , exec          , uwsm-app -- hyprlock
bindd  = SUPER ALT      , C           , Color Picker (Hex)                            , exec          , uwsm-app -- hyprpicker -a

# ================================================================================
# * Windows
# ================================================================================

# workspace = special:exposed,gapsout:60,gapsin:30,bordersize:5,border:true,shadow:false
# bindd = SUPER      , D, Windows expose          , exec                  , uwsm-app -- pypr expose

bindd = SUPER      , M, Minimize/Restore window , exec                  , uwsm-app -- pypr toggle_special stash
bindd = SUPER SHIFT, M, View minimized windows  , togglespecialworkspace, stash

# Mouse
binddm = SUPER     , mouse:272 , Move window                                   , movewindow   # LMB
binddm = SUPER     , mouse:273 , Resize window                                 , resizewindow # RMB
binddm = SUPER     , mouse:274 , Close focused window                          , killactive   # MMB

# Control
bindd = SUPER      , C         , Close focused window                          , killactive
bindd = SUPER CTRL , C         , Kill focused window                           , forcekillactive
# TODO: write script for Super+T to cycle through tile/pseudo/float
bindd = SUPER      , T         , Window: toggle tile/float                     , togglefloating
bindd = SUPER ALT  , T         , Window: toggle pseudo-tile                    , pseudo
bindd = SUPER SHIFT, Y         , Notify activewindow data                      , exec, $hyprScripts/hypr-activewindowdata
bindd = SUPER      , G         , Toggle window group                           , togglegroup
# TODO: write script to lock group if window is in a group, otherwise
# denywindowfromgroup
bindd = SUPER CTRL , G         , Lock active group                             , lockactivegroup, toggle
bindd = SUPER SHIFT, G         , Lock window from group                        , denywindowfromgroup, toggle
bindd = SUPER      , F         , Toggle window maximize                        , fullscreen, 1 toggle
bindd = SUPER ALT  , F         , Toggle window fullscreen                      , fullscreen
bindd = SUPER CTRL , F         , Toggle window fullscreenstate                 , fullscreenstate, -1 3 toggle
bindd = SUPER      , X         , Swaps two halves of split                     , swapsplit
# TODO: make pin work on tiled windows too
bindd = SUPER      , P         , Pin active window (show on all workspaces)    , pin

# Focus
bindd = SUPER      , H         , Focus window left                             , movefocus        , l
bindd = SUPER      , J         , Focus window down                             , movefocus        , d
bindd = SUPER      , K         , Focus window up                               , movefocus        , u
bindd = SUPER      , L         , Focus window right                            , movefocus        , r
bindd = ALT        , Tab       , Focus next visible window                     , cyclenext        , next
bindd = ALT SHIFT  , Tab       , Focus previous visible window                 , cyclenext        , prev

# Move
# TODO: write 'movewindow' script
# - floating window: move to screen edge
# - tiled window: swap with next window or move to adjacent monitor
# - unlocked group: move window around inside group
# - locked group: move group around like it was a single window
# NOTE: locked groups should always behave like standalone windows
binded = SUPER SHIFT, H, Window: Move Left , movewindoworgroup, l
binded = SUPER SHIFT, J, Window: Move Down , movewindoworgroup, d
binded = SUPER SHIFT, K, Window: Move Up   , movewindoworgroup, u
binded = SUPER SHIFT, L, Window: Move Right, movewindoworgroup, r
# binded = SUPER SHIFT, H,Move activewindow left,exec, $hyprScripts/moveactivewindow l -30 0
# binded = SUPER SHIFT, J,Move activewindow down,exec, $hyprScripts/moveactivewindow d 0 30
# binded = SUPER SHIFT, K,Move activewindow up,exec, $hyprScripts/moveactivewindow u 0 -30
# binded = SUPER SHIFT, L,Move activewindow right,exec, $hyprScripts/moveactivewindow r 30 0

bindd = SUPER, R, Window: Resize Mode, submap, resize

submap = resize
bindde = , H, Resize: Left , resizeactive, -30 0
bindde = , J, Resize: Down , resizeactive, 0 30
bindde = , K, Resize: Up   , resizeactive, 0 -30
bindde = , L, Resize: Right, resizeactive, 30 0

bind=,catchall,submap,reset

# bindd = , Escape, Deactivate window resize mode, submap, reset
submap = reset

# ================================================================================
# * Settings
# ================================================================================

bindd = SUPER, S, Settings mode, submap, settings
# NOTE: Need to wait for next version of hyprland for this to work
# https://wiki.hypr.land/Configuring/Binds/#automatically-close-a-submap-on-dispatch
# submap = settings, reset

submap = settings
bindd = , W, Settings: Wifi           ,exec, pypr toggle wifi
bindd = , B, Settings: Bluetooth      ,exec, pypr toggle bluetooth
bindd = , A, Settings: Audio          ,exec, pypr toggle audio
bindd = , M, Settings: Monitor Profile,exec, pypr toggle monitors
bindd = , I, Settings: Idle Lock      ,exec, $hyprScripts/hypr-toggle-idle

# Submap resets
bind=,W,submap,reset
bind=,B,submap,reset
bind=,A,submap,reset
bind=,M,submap,reset
bind=,I,submap,reset
bind=,catchall,submap,reset

# bindd = , Escape, Deactivate settings mode, submap, reset

submap = reset

# ================================================================================
# * Workspaces
# ================================================================================

# Special
bindd = SUPER, Apostrophe, Toggle dropterm, exec, pypr toggle dropterm
bindd = SUPER SHIFT, Apostrophe, Toggle processes, exec, pypr toggle processes
bindd = CTRL ALT, Delete, Toggle mission center, exec, pypr toggle missioncenter
bindd = SUPER, W, Toggle Weather, exec, pypr toggle weather

# Montiors
bindd = SUPER CTRL, H, Focus monitor left, focusmonitor, l
bindd = SUPER CTRL, J, Focus monitor down, focusmonitor, d
bindd = SUPER CTRL, K, Focus monitor up, focusmonitor, u
bindd = SUPER CTRL, L, Focus monitor right, focusmonitor, r

bindd = SUPER CTRL SHIFT, H, Move window to monitor left, movewindow, mon:l
bindd = SUPER CTRL SHIFT, J, Move window to monitor down, movewindow, mon:d
bindd = SUPER CTRL SHIFT, K, Move window to monitor up, movewindow, mon:u
bindd = SUPER CTRL SHIFT, L, Move window to monitor right, movewindow, mon:r

bindd = SUPER, F1, Switch to monitor SW, focusmonitor, 0
bindd = SUPER, F2, Switch to monitor SE, focusmonitor, 1
bindd = SUPER, F4, Switch to monitor NW, focusmonitor, 2
bindd = SUPER, F5, Switch to monitor NE, focusmonitor, 3
bindd = SUPER SHIFT, F1, Move window to monitor SW, movewindow, mon:0
bindd = SUPER SHIFT, F2, Move window to monitor SE, movewindow, mon:1
bindd = SUPER SHIFT, F4, Move window to monitor NW, movewindow, mon:2
bindd = SUPER SHIFT, F5, Move window to monitor NE, movewindow, mon:3
bindd = SUPER ALT, F1, Send window to monitor SW, movewindow, mon:0 silent
bindd = SUPER ALT, F2, Send window to monitor SE, movewindow, mon:1 silent
bindd = SUPER ALT, F4, Send window to monitor NW, movewindow, mon:2 silent
bindd = SUPER ALT, F5, Send window to monitor NE, movewindow, mon:3 silent

# ================================================================================
# * Layouts
# ================================================================================
bindd = SUPER SHIFT, Return    , Toggle focused window split (dwindle)         , togglesplit
# bindd = SUPER      , O         , Cycle orientations (master)                   , layoutmsg        , orientationnext

# TODO: Switch audio output with Super + Mute
bindld = SUPER, XF86AudioMute, Switch audio output, exec, $hyprScripts/audio-switch

# Screenshot/Screencapture
# bind = SUPER, P, exec, $scrPath/screenshot.sh s # partial screenshot capture
# bind = SUPER+Ctrl, P, exec, $scrPath/screenshot.sh sf # partial screenshot capture (frozen screen)
# bind = SUPER+Alt, P, exec, $scrPath/screenshot.sh m # monitor screenshot capture
# bind = , Print, exec, $scrPath/screenshot.sh p # all monitors screenshot capture

# Custom scripts
bind = SUPER ALT, G, exec, $hyprScripts/hypr-gamemode # disable hypr effects for gamemode

# Move/resize windows with SUPER + LMB/RMB and dragging
# bindm = SUPER, Z, movewindow
# bindm = SUPER, X, resizewindow


