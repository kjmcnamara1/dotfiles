# ░█░█░█▀▀░█░█░█▀▄░▀█▀░█▀█░█▀▄░▀█▀░█▀█░█▀▀░█▀▀
# ░█▀▄░█▀▀░░█░░█▀▄░░█░░█░█░█░█░░█░░█░█░█░█░▀▀█
# ░▀░▀░▀▀▀░░▀░░▀▀░░▀▀▀░▀░▀░▀▀░░▀▀▀░▀░▀░▀▀▀░▀▀▀

# See https://wiki.hyprland.org/Configuring/Keywords/
#  &  https://wiki.hyprland.org/Configuring/Binds/

# ================================================================================
# * Applications
# ================================================================================
bindd = $mainMod      , Return, Terminal emulator          , exec, $mainTerminal
bindd = $mainMod      , E     , Yazi File manager          , exec, uwsm-app -- $mainTerminal --class=$files -e $files
bindd = $mainMod ALT  , E     , Thunar File manager        , exec, uwsm-app -- $altFiles
bindd = $mainMod      , B     , Web browser                , exec, $hyprScripts/launch-browser
bindd = $mainMod      , M     , Open URL in mpv            , exec, ~/.config/mpv/scripts/open_url_in_mpv
bindd = $mainMod      , N     , Dismiss notifications      , exec, makoctl dismiss -a
# bindd = $mainMod CTRL , N     , Reload SwayNC              , exec, ~/.config/swaync/refresh
# bindd = $mainMod      , C     , Text editor                                  , exec, $editor
# bindd = Ctrl+Shift    , Escape, Launch system monitor (htop/btop or fallback to top), exec, $scrPath/sysmonlaunch.sh

# ================================================================================
# * Session
# ================================================================================
bindd = CTRL ALT          , Backspace , Kill hyprland session                         , exit
bindd = $mainMod          , Delete    , Power menu                                    , exec          , $powermenu
bindd = $mainMod          , Backspace , Power menu                                    , exec          , $powermenu
bindd = $mainMod CTRL     , W         , Launch wallpaper selector                     , exec          , uwsm-app -- waypaper --no-post-command
bindd = $mainMod          , Escape    , Lock screen                                   , exec          , uwsm-app -- hyprlock
bindd = $mainMod ALT      , C         , Color Picker (Hex)                            , exec          , uwsm-app -- hyprpicker -a
bindd = $mainMod CTRL     , B         , Reload waybar                                 , exec          , $hyprScripts/restart-app waybar # pkill -x waybar; uwsm-app -- env GTK_DEBUG=interactive waybar

# ================================================================================
# * Windows
# ================================================================================

# workspace = special:exposed,gapsout:60,gapsin:30,bordersize:5,border:true,shadow:false
# bindd = $mainMod      , D, Windows expose          , exec                  , uwsm-app -- pypr expose

bindd = $mainMod      , M, Minimize/Restore window , exec                  , uwsm-app -- pypr toggle_special stash
bindd = $mainMod SHIFT, M, View minimized windows  , togglespecialworkspace, stash

# Mouse
binddm = $mainMod     , mouse:272 , Move window                                   , movewindow   # LMB
binddm = $mainMod     , mouse:273 , Resize window                                 , resizewindow # RMB
binddm = $mainMod     , mouse:274 , Close focused window                          , killactive   # MMB

# Control
bindd = $mainMod      , C         , Close focused window                          , killactive
bindd = $mainMod      , T         , Toggle window tile/float                      , togglefloating
bindd = $mainMod      , Y         , Toggle window pseudo-tiled                    , pseudo
bindd = $mainMod SHIFT, Y         , Notify activewindow data                      , exec, $hyprScripts/hypr-activewindowdata
bindd = $mainMod      , G         , Toggle window group                           , togglegroup
bindd = $mainMod CTRL , G         , Lock active group                             , lockactivegroup, toggle
bindd = $mainMod SHIFT, G         , Lock window from group                        , denywindowfromgroup, toggle
bindd = $mainMod      , F         , Toggle window fullscreen                      , fullscreen
bindd = $mainMod      , X         , Swaps two halves of split                     , swapsplit
bindd = $mainMod      , P         , Pin active window (show on all workspaces)    , pin

# Focus
bindd = $mainMod      , H         , Focus window left                             , movefocus        , l
bindd = $mainMod      , J         , Focus window down                             , movefocus        , d
bindd = $mainMod      , K         , Focus window up                               , movefocus        , u
bindd = $mainMod      , L         , Focus window right                            , movefocus        , r
bindd = ALT           , Tab       , Focus next visible window                     , cyclenext        , next
bindd = ALT SHIFT     , Tab       , Focus previous visible window                 , cyclenext        , prev

# Move
binded = $mainMod SHIFT, H,Move activewindow left,movewindoworgroup, l
binded = $mainMod SHIFT, J,Move activewindow down,movewindoworgroup, d
binded = $mainMod SHIFT, K,Move activewindow up,movewindoworgroup, u
binded = $mainMod SHIFT, L,Move activewindow right,movewindoworgroup, r
# binded = $mainMod SHIFT, H,Move activewindow left,exec, $hyprScripts/moveactivewindow l -30 0
# binded = $mainMod SHIFT, J,Move activewindow down,exec, $hyprScripts/moveactivewindow d 0 30
# binded = $mainMod SHIFT, K,Move activewindow up,exec, $hyprScripts/moveactivewindow u 0 -30
# binded = $mainMod SHIFT, L,Move activewindow right,exec, $hyprScripts/moveactivewindow r 30 0

# Resize
bindde = $mainMod ALT, H, Resize left , resizeactive, -30 0
bindde = $mainMod ALT, J, Resize down , resizeactive, 0 30
bindde = $mainMod ALT, K, Resize up , resizeactive, 0 -30
bindde = $mainMod ALT, L, Resize right , resizeactive, 30 0

bindd = $mainMod, R, Activate window resize mode, submap, resize
submap = resize
bindde = , H, Resize left (resize mode), resizeactive, -15 0
bindde = , J, Resize down (resize mode), resizeactive, 0 15
bindde = , K, Resize up (resize mode), resizeactive, 0 -15
bindde = , L, Resize right (resize mode), resizeactive, 15 0
bindd = , Escape, Deactivate window resize mode, submap, reset
submap = reset

# ================================================================================
# * Settings
# ================================================================================

bindd = $mainMod, S, Settings mode, submap, settings
# NOTE: Need to wait for next version of hyprland for this to work
# https://wiki.hypr.land/Configuring/Binds/#automatically-close-a-submap-on-dispatch
# submap = settings, reset

submap = settings
bindd = , W, Wifi Settings ,exec, pypr toggle wifi
bindd = , B, Bluetooth Settings,exec, pypr toggle bluetooth
bindd = , A, Audio Settings,exec, pypr toggle audio
bindd = , M, Monitor Profile Settings,exec, pypr toggle monitors
bindd = , I,Toggle Idle Lock,exec, $hyprScripts/hypr-toggle-idle

# Submap resets
bind=,W,submap,reset
bind=,B,submap,reset
bind=,A,submap,reset
bind=,M,submap,reset
bind=,I,submap,reset
bind=,catchall,submap,reset

# bindd = , Escape, Deactivate settings mode, submap, reset

submap = reset

# ================================================================================
# * Workspaces
# ================================================================================

# Special
bindd = $mainMod, Apostrophe, Toggle dropterm, exec, pypr toggle dropterm
bindd = $mainMod SHIFT, Apostrophe, Toggle taskbar, exec, pypr toggle taskbar

# Switch workspaces to a relative workspace
bindd = $mainMod, Period, Increase workspace, workspace, r+1
bindd = $mainMod, Comma, Decrease workspace, workspace, r-1
bindd = $mainMod, Slash, Previous workspace, workspace, previous
# bindd = $mainMod, M, Next empty workspace, workspace, emptym

# Move focused window to a relative workspace
bind = $mainMod SHIFT, Down, movetoworkspace, r+1
bind = $mainMod SHIFT, Up, movetoworkspace, r-1

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, r+1
bind = $mainMod, mouse_up, workspace, r-1

# Switch
bindd = $mainMod, 1, Switch to workspace 1, workspace, 1
bindd = $mainMod, 2, Switch to workspace 2, workspace, 2
bindd = $mainMod, 3, Switch to workspace 3, workspace, 3
bindd = $mainMod, 4, Switch to workspace 4, workspace, 4
bindd = $mainMod, 5, Switch to workspace 5, workspace, 5
bindd = $mainMod, 6, Switch to workspace 6, workspace, 6
bindd = $mainMod, 7, Switch to workspace 7, workspace, 7
bindd = $mainMod, 8, Switch to workspace 8, workspace, 8
bindd = $mainMod, 9, Switch to workspace 9, workspace, 9
bindd = $mainMod, 0, Switch to workspace 10, workspace, 10

# Move
bindd = $mainMod SHIFT, 1, Move window to workspace 1, movetoworkspace, 1
bindd = $mainMod SHIFT, 2, Move window to workspace 2, movetoworkspace, 2
bindd = $mainMod SHIFT, 3, Move window to workspace 3, movetoworkspace, 3
bindd = $mainMod SHIFT, 4, Move window to workspace 4, movetoworkspace, 4
bindd = $mainMod SHIFT, 5, Move window to workspace 5, movetoworkspace, 5
bindd = $mainMod SHIFT, 6, Move window to workspace 6, movetoworkspace, 6
bindd = $mainMod SHIFT, 7, Move window to workspace 7, movetoworkspace, 7
bindd = $mainMod SHIFT, 8, Move window to workspace 8, movetoworkspace, 8
bindd = $mainMod SHIFT, 9, Move window to workspace 9, movetoworkspace, 9
bindd = $mainMod SHIFT, 0, Move window to workspace 10, movetoworkspace, 10

# Send
bindd = $mainMod ALT, 1, Send window to workspace 1, movetoworkspacesilent, 1
bindd = $mainMod ALT, 2, Send window to workspace 2, movetoworkspacesilent, 2
bindd = $mainMod ALT, 3, Send window to workspace 3, movetoworkspacesilent, 3
bindd = $mainMod ALT, 4, Send window to workspace 4, movetoworkspacesilent, 4
bindd = $mainMod ALT, 5, Send window to workspace 5, movetoworkspacesilent, 5
bindd = $mainMod ALT, 6, Send window to workspace 6, movetoworkspacesilent, 6
bindd = $mainMod ALT, 7, Send window to workspace 7, movetoworkspacesilent, 7
bindd = $mainMod ALT, 8, Send window to workspace 8, movetoworkspacesilent, 8
bindd = $mainMod ALT, 9, Send window to workspace 9, movetoworkspacesilent, 9
bindd = $mainMod ALT, 0, Send window to workspace 10, movetoworkspacesilent, 10

# ================================================================================
# * Layouts
# ================================================================================
bindd = $mainMod SHIFT, Return    , Toggle focused window split (dwindle)         , togglesplit
bindd = $mainMod      , O         , Cycle orientations (master)                   , layoutmsg        , orientationnext

# Rofi menus
$menu = walker
$applauncher = rofi -show combi
# $applauncher = rofi -show combi -modi window,run,combi -combi-modi window,run
bindd = $mainMod, Space, Application launcher, exec, uwsm-app -- $menu
bindd = $mainMod ALT, Space, Archlinux Packages, exec, uwsm-app -- $menu -m archlinuxpkgs
bindd = $mainMod,V,Clipboard, exec, uwsm-app -- $menu -m clipboard
# bindd = $mainMod, Space, Application launcher, exec, pkill -x rofi || $menu
bindd = $mainMod, Tab  , Window switcher     , exec, $menu -m windows
# bind = $mainMod+Shift, E, exec, pkill -x rofi || $scrPath/rofilaunch.sh f   # launch file explorer
# TODO: convert hypr-keybindings to walker menu
bindd = $mainMod SHIFT, Slash, Hyprland keybindings, exec, uwsm-app -- $hyprScripts/hypr-keybindings


$osdclient = swayosd-client --monitor "$(hyprctl monitors -j | jq -r '.[] | select(.focused == true).name')"
# Laptop multimedia keys for volume and LCD brightness (with OSD)
binddel = , XF86AudioRaiseVolume , Raise volume       , exec, $osdclient --output-volume raise
binddel = , XF86AudioLowerVolume , Lower volume       , exec, $osdclient --output-volume lower
binddel = , XF86AudioMute        , Mute volume        , exec, $osdclient --output-volume mute-toggle
binddel = , XF86AudioMicMute     , Mute microphone    , exec, $osdclient --input-volume mute-toggle
binddel = , XF86MonBrightnessUp  , Increase brightness, exec, $osdclient --brightness raise
binddel = , XF86MonBrightnessDown, Decrease brightness, exec, $osdclient --brightness lower

# Precise 1% multimedia adjustments with Alt modifier
bindeld = ALT, XF86AudioRaiseVolume, Volume up precise, exec, $osdclient --output-volume +1
bindeld = ALT, XF86AudioLowerVolume, Volume down precise, exec, $osdclient --output-volume -1
bindeld = ALT, XF86MonBrightnessUp, Brightness up precise, exec, $osdclient --brightness +1
bindeld = ALT, XF86MonBrightnessDown, Brightness down precise, exec, $osdclient --brightness -1

# Media control
binddl = , XF86AudioNext , Next track    , exec, $osdclient --playerctl next
binddl = , XF86AudioPause, Pause         , exec, $osdclient --playerctl play-pause
binddl = , XF86AudioPlay , Play          , exec, $osdclient --playerctl play-pause
binddl = , XF86AudioPrev , Previous track, exec, $osdclient --playerctl previous

# TODO: Switch audio output with Super + Mute
bindld = SUPER, XF86AudioMute, Switch audio output, exec, $hyprScripts/audio-switch

# Audio control
# bindl  = , F10, exec, $scrPath/volumecontrol.sh -o m # toggle audio mute
# bindel = , F11, exec, $scrPath/volumecontrol.sh -o d # decrease volume
# bindel = , F12, exec, $scrPath/volumecontrol.sh -o i # increase volume
# bindl  = , XF86AudioMute, exec, $scrPath/volumecontrol.sh -o m # toggle audio mute
# bindl  = , XF86AudioMicMute, exec, $scrPath/volumecontrol.sh -i m # toggle microphone mute
# bindel = , XF86AudioLowerVolume, exec, $scrPath/volumecontrol.sh -o d # decrease volume
# bindel = , XF86AudioRaiseVolume, exec, $scrPath/volumecontrol.sh -o i # increase volume

# Brightness control
# bindel = , XF86MonBrightnessUp, exec, $scrPath/brightnesscontrol.sh i # increase brightness
# bindel = , XF86MonBrightnessDown, exec, $scrPath/brightnesscontrol.sh d # decrease brightness

# Screenshot/Screencapture
# bind = $mainMod, P, exec, $scrPath/screenshot.sh s # partial screenshot capture
# bind = $mainMod+Ctrl, P, exec, $scrPath/screenshot.sh sf # partial screenshot capture (frozen screen)
# bind = $mainMod+Alt, P, exec, $scrPath/screenshot.sh m # monitor screenshot capture
# bind = , Print, exec, $scrPath/screenshot.sh p # all monitors screenshot capture

# Custom scripts
bind = $mainMod ALT, G, exec, $hyprScripts/gamemode # disable hypr effects for gamemode
# bind = $mainMod+Alt, G, exec, $scrPath/gamemode.sh # disable hypr effects for gamemode
# bind = $mainMod+Alt, Right, exec, $scrPath/swwwallpaper.sh -n # next wallpaper
# bind = $mainMod+Alt, Left, exec, $scrPath/swwwallpaper.sh -p # previous wallpaper
# bind = $mainMod+Alt, Up, exec, $scrPath/wbarconfgen.sh n # next waybar mode
# bind = $mainMod+Alt, Down, exec, $scrPath/wbarconfgen.sh p # previous waybar mode
# bind = $mainMod+Shift, R, exec, pkill -x rofi || $scrPath/wallbashtoggle.sh -m # launch wallbash mode select menu
# bind = $mainMod+Shift, T, exec, pkill -x rofi || $scrPath/themeselect.sh # launch theme select menu
# bind = $mainMod+Shift, A, exec, pkill -x rofi || $scrPath/rofiselect.sh # launch select menu
# bind = $mainMod+Shift, W, exec, pkill -x rofi || $scrPath/swwwallselect.sh # launch wallpaper select menu
# bind = $mainMod, V, exec, pkill -x rofi || $scrPath/cliphist.sh c # launch clipboard
# bind = $mainMod+Shift, V, exec, pkill -x rofi || $scrPath/cliphist.sh # launch clipboard Manager
# bind = $mainMod, K, exec, $scrPath/keyboardswitch.sh # switch keyboard layout
# bind = $mainMod, slash, exec, pkill -x rofi || $scrPath/keybinds_hint.sh c # launch keybinds hint

# Move/resize windows with mainMod + LMB/RMB and dragging
# bindm = $mainMod, Z, movewindow
# bindm = $mainMod, X, resizewindow


